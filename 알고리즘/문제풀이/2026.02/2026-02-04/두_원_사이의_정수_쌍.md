# 🎯 [알고리즘 정리] 두 원 사이의 정수 쌍

## 1. 문제 핵심 요약
*   **목표**: 중심이 원점인 두 원(반지름 $r_1, r_2$) 사이의 공간(경계선 포함)에 존재하는 **정수 좌표 $(x, y)$의 개수**를 구하는 문제.
*   **조건**: $1 \le r_1 < r_2 \le 1,000,000$. 결과값이 매우 클 수 있으므로 `long` 타입을 사용해야 함.

## 2. 해결을 위한 핵심 전략

### ① 원의 방정식 활용
원 안의 점을 찾는 가장 확실한 방법은 원의 방정식을 이용하는 것입니다.
*   **방정식**: $x^2 + y^2 = r^2 \Rightarrow y = \sqrt{r^2 - x^2}$
*   특정 $x$ 좌표에서 가능한 정수 $y$의 범위는 다음과 같습니다.
    *   **최대 $y$ ($y_{max}$)**: 큰 원($r_2$) 내부의 최대 정수 $\Rightarrow \lfloor \sqrt{r_2^2 - x^2} \rfloor$ (내림)
    *   **최소 $y$ ($y_{min}$)**: 작은 원($r_1$) 경계 또는 외부의 최소 정수 $\Rightarrow \lceil \sqrt{r_1^2 - x^2} \rceil$ (올림)
    *   단, $x \ge r_1$인 경우 작은 원을 벗어나므로 $y_{min} = 0$입니다.

### ② 사분면 활용 (중복 제거 핵심)
전체 원을 한 번에 계산하면 축 위의 점들이 중복 계산될 위험이 큽니다. 가장 깔끔한 방법은 **한 사분면만 계산한 뒤 4를 곱하는 것**입니다.

1.  $x$ 좌표를 $1$부터 $r_2$까지 순회합니다. (축 하나를 제외하기 위해 $x=1$부터 시작)
2.  각 $x$당 존재하는 점의 개수: $y_{max} - y_{min} + 1$
3.  전체 개수 = (모든 $x$에 대한 합) $\times 4$

---

## 3. 핵심 코드 구조 (Java)

```java
class Solution {
    public long solution(int r1, int r2) {
        long answer = 0;
        
        // x축의 1부터 r2까지 탐색
        for (int x = 1; x <= r2; x++) {
            // 해당 x에서 큰 원 내부의 최대 y (내림)
            long y2 = (long) Math.floor(Math.sqrt(Math.pow(r2, 2) - Math.pow(x, 2)));
            
            // 해당 x에서 작은 원 외부의 최소 y (올림)
            long y1 = 0;
            if (x < r1) {
                y1 = (long) Math.ceil(Math.sqrt(Math.pow(r1, 2) - Math.pow(x, 2)));
            }
            
            answer += (y2 - y1 + 1);
        }
        
        return answer * 4;
    }
}
```

---

## 4. 오답 노트 & 교훈
*   **오버플로우**: 반지름이 100만일 때 $r^2$은 $10^{12}$이므로 반드시 `long` 연산을 수행하거나 `Math.pow`를 적절히 사용해야 합니다.
*   **정밀도 오차**: `Math.sqrt`는 실수 연산이므로 미세한 오차가 발생할 수 있습니다. 하지만 이 문제에서는 정밀도가 큰 문제가 되지 않으나, 불안하다면 `x*x` 식의 정수 연산을 최대한 활용하는 것이 좋습니다.
*   **범위 계산**: $y_{min}$을 구할 때 올림(`ceil`)을 사용하는 이유를 명확히 이해해야 합니다. 작은 원의 경계선에 걸친 점도 포함해야 하기 때문입니다.
